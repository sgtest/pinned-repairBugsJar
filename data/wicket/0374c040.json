{
  "files": 1, 
  "nb_test": 1706, 
  "nb_error": 0, 
  "classification": {
    "singleLine": false
  }, 
  "failing_tests": [
    "AjaxCallbackFunctionTest.testCallbackFunctionWithAll:163->Assert.assertEquals:144->Assert.assertEquals:115 expected:<....0-\"};", 
    "var params = [[{\"name\":\"explicit\",\"value\":explicit},{\"name\":\"resolved\",\"value\":window.location.href},{\"name\":\"converted\",\"value\":converted.substring(0, 3)}];", 
    "attrs.ep = params.concat(attrs.ep)];", 
    "Wicket.Ajax.ajax(a...> but was:<....0-\"};", 
    "var params = [{'explicit': explicit,'resolved': window.location.href,'converted': converted.substring(0, 3)};", 
    "attrs.ep = params];", 
    "Wicket.Ajax.ajax(a...>", 
    "AjaxCallbackFunctionTest.testCallbackFunctionWithContext:58->Assert.assertEquals:144->Assert.assertEquals:115 expected:<....0-\"};", 
    "var params = [[];", 
    "attrs.ep = params.concat(attrs.ep)];", 
    "Wicket.Ajax.ajax(a...> but was:<....0-\"};", 
    "var params = [{};", 
    "attrs.ep = params];", 
    "Wicket.Ajax.ajax(a...>", 
    "AjaxCallbackFunctionTest.testCallbackFunctionWithConverted:133->Assert.assertEquals:144->Assert.assertEquals:115 expected:<....0-\"};", 
    "var params = [[{\"name\":\"converted\",\"value\":converted.substring(0, 3)}];", 
    "attrs.ep = params.concat(attrs.ep)];", 
    "Wicket.Ajax.ajax(a...> but was:<....0-\"};", 
    "var params = [{'converted': converted.substring(0, 3)};", 
    "attrs.ep = params];", 
    "Wicket.Ajax.ajax(a...>", 
    "AjaxCallbackFunctionTest.testCallbackFunctionWithExplicit:82->Assert.assertEquals:144->Assert.assertEquals:115 expected:<....0-\"};", 
    "var params = [[{\"name\":\"explicit\",\"value\":explicit}];", 
    "attrs.ep = params.concat(attrs.ep)];", 
    "Wicket.Ajax.ajax(a...> but was:<....0-\"};", 
    "var params = [{'explicit': explicit};", 
    "attrs.ep = params];", 
    "Wicket.Ajax.ajax(a...>", 
    "AjaxCallbackFunctionTest.testCallbackFunctionWithResolved:105->Assert.assertEquals:144->Assert.assertEquals:115 expected:<....0-\"};", 
    "var params = [[{\"name\":\"resolved\",\"value\":window.location.href}];", 
    "attrs.ep = params.concat(attrs.ep)];", 
    "Wicket.Ajax.ajax(a...> but was:<....0-\"};", 
    "var params = [{'resolved': window.location.href};", 
    "attrs.ep = params];", 
    "Wicket.Ajax.ajax(a...>", 
    "AjaxCallbackFunctionTest.testDefaultCallbackFunction:34->Assert.assertEquals:144->Assert.assertEquals:115 expected:<....0-\"};", 
    "var params = [[];", 
    "attrs.ep = params.concat(attrs.ep)];", 
    "Wicket.Ajax.ajax(a...> but was:<....0-\"};", 
    "var params = [{};", 
    "attrs.ep = params];", 
    "Wicket.Ajax.ajax(a...>", 
    "AjaxCallbackFunctionTest.testJQueryUIEvent:201->Assert.assertEquals:144->Assert.assertEquals:115 expected:<....0-\"};", 
    "var params = [[{\"name\":\"sortIndex\",\"value\":$(this).find(':data(sortable-item)').index(ui.item)},{\"name\":\"sortItemId\",\"value\":$(ui.item).attr('id')},{\"name\":\"sortSenderId\",\"value\":$(ui.sender).attr('id')}];", 
    "attrs.ep = params.concat(attrs.ep)];", 
    "Wicket.Ajax.ajax(a...> but was:<....0-\"};", 
    "var params = [{'sortIndex': $(this).find(':data(sortable-item)').index(ui.item),'sortItemId': $(ui.item).attr('id'),'sortSenderId': $(ui.sender).attr('id')};", 
    "attrs.ep = params];", 
    "Wicket.Ajax.ajax(a...>"
  ], 
  "patch": "diff --git a/wicket-core/src/main/java/org/apache/wicket/ajax/AbstractDefaultAjaxBehavior.java b/wicket-core/src/main/java/org/apache/wicket/ajax/AbstractDefaultAjaxBehavior.java\nindex a309635..bc0989d 100644\n--- a/wicket-core/src/main/java/org/apache/wicket/ajax/AbstractDefaultAjaxBehavior.java\n+++ b/wicket-core/src/main/java/org/apache/wicket/ajax/AbstractDefaultAjaxBehavior.java\n@@ -504,30 +504,28 @@ public CharSequence getCallbackFunctionBody(CallbackParameter... extraParameters\n \t\tsb.append(\"var attrs = \");\n \t\tsb.append(attrsJson);\n \t\tsb.append(\";\\n\");\n-\t\tsb.append(\"var params = {\");\n-\t\tboolean first = true;\n+\t\tJSONArray jsonArray = new JSONArray();\n \t\tfor (CallbackParameter curExtraParameter : extraParameters)\n \t\t{\n \t\t\tif (curExtraParameter.getAjaxParameterName() != null)\n \t\t\t{\n-\t\t\t\tif (!first)\n-\t\t\t\t\tsb.append(',');\n-\t\t\t\telse\n-\t\t\t\t\tfirst = false;\n-\t\t\t\tsb.append('\\'').append(curExtraParameter.getAjaxParameterName()).append(\"': \")\n-\t\t\t\t\t.append(curExtraParameter.getAjaxParameterCode());\n-\t\t\t}\n-\t\t}\n-\t\tsb.append(\"};\\n\");\n-\t\tif (attributes.getExtraParameters().isEmpty())\n+\t\t\t\ttry\n \t\t\t\t{\n-\t\t\tsb.append(\"attrs.\").append(AjaxAttributeName.EXTRA_PARAMETERS).append(\" = params;\\n\");\n+\t\t\t\t\tJSONObject object = new JSONObject();\n+\t\t\t\t\tobject.put(\"name\", curExtraParameter.getAjaxParameterName());\n+\t\t\t\t\tobject.put(\"value\", new JsonFunction(curExtraParameter.getAjaxParameterCode()));\n+\t\t\t\t\tjsonArray.put(object);\n \t\t\t\t}\n-\t\telse\n+\t\t\t\tcatch (JSONException e)\n \t\t\t\t{\n-\t\t\tsb.append(\"attrs.\").append(AjaxAttributeName.EXTRA_PARAMETERS).append(\" = Wicket.merge(attrs.\")\n-\t\t\t\t\t.append(AjaxAttributeName.EXTRA_PARAMETERS).append(\", params);\\n\");\n+\t\t\t\t\tthrow new WicketRuntimeException(e);\n+\t\t\t\t}\n+\t\t\t}\n \t\t}\n+\t\tsb.append(\"var params = \").append(jsonArray).append(\";\\n\");\n+\t\tsb.append(\"attrs.\").append(AjaxAttributeName.EXTRA_PARAMETERS)\n+\t\t\t\t.append(\" = params.concat(attrs.\")\n+\t\t\t\t.append(AjaxAttributeName.EXTRA_PARAMETERS).append(\");\\n\");\n \t\tsb.append(\"Wicket.Ajax.ajax(attrs);\\n\");\n \t\treturn sb;\n \t}\n", 
  "project": "wicket", 
  "linesAdd": 14, 
  "jira_id": "5759", 
  "nb_skipped": 1, 
  "commit": "0374c040", 
  "nb_failure": 7, 
  "linesRem": 16
}